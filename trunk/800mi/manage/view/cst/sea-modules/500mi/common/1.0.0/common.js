define(function(require){function r(){e(document).scrollTop()>80?e("#actionBar").addClass("cateFixed"):e("#actionBar").removeClass("cateFixed")}function i(){e(document).scrollTop()>=130?(e(".side-reckon").addClass("side-reckon-fixed"),e(".side-reckon").css("left",Math.max((e(window).width()-e(".w_980").width())/2,0)+"px")):(e(".side-reckon").removeClass("side-reckon-fixed"),e(".side-reckon").css("left",0))}function s(t){if(t[0]<1)return;var n=e(window).width()-200-t[1],r=Math.floor(n/t[0]),i=r*t[0]+t[1];i<980&&(i=t[2]*t[0]+t[1]),e(".w_980").css("width",i+"px")}function o(){var t=e(window).width();t>1200?(e(".w_980").css("width","1200px"),e(".right-container").css("width","985px")):(e(".w_980").css("width","980px"),e(".right-container").css("width","765px"))}function u(){var t=e(document).width(),n=e(".w_980").width(),r=t<=n+65?10:(t-n)/2-65;e(".ft-fixed-right").css("right",r+"px"),e(document).scrollTop()>200?e(".toTop").show(10):e(".toTop").hide()}var e=require("$"),t=require("underscore");(function(e){e.fn.hoverForIE6=function(t){var n=e.extend({current:"hover",delay:10},t||{});e.each(this,function(){var t=null,r=null,i=!1;e(this).bind("mouseover",function(){if(i)clearTimeout(r);else{var s=e(this);t=setTimeout(function(){s.addClass(n.current),i=!0},n.delay/2)}}).bind("mouseout",function(){if(i){var s=e(this);r=setTimeout(function(){s.removeClass(n.current),i=!1},n.delay)}else clearTimeout(t)})})}})(e),function(n){var r=function(e,t,n){var r=!1;for(var i=0;i<e.length;i++)if(e[i]["type"+n+"_id"]==t){r=e[i];break}return r},i=function(e){var n=[];return t.each(e,function(e){var t=r(n,e.type1_id,1);t||(t={type1_id:e.type1_id,type1_name:e.type1_name,type2List:[]},n.push(t));var i=r(t.type2List,e.type2_id,2);i||(i={type2_id:e.type2_id,type2_name:e.type2_name,type3List:[]},t.type2List.push(i));var s=r(i.type3List,e.type3_id,3);s||(s={type3_id:e.type3_id,type3_name:e.type3_name},i.type3List.push(s))}),n},s=function(e,t){var n="";n+='<div class="item'+(t%2?" itemEven":"")+'">',n+='<span><h3><a href="/view/cst/store.php?typeId='+e.type1_id+"&lv=1"+'">'+e.type1_name+"</a></h3><p>";for(var r=0;r<e.type2List.length;r++)n+=o(e.type2List[r],r);n+="</p></span>",n+='<div class="i-mc"><div class="shoadw"></div>';for(var i=0;i<e.type2List.length;i++)n+=u(e.type2List[i],i);return n+="</div></div>",n},o=function(e,t){var n="";return n+='<a href="/view/cst/store.php?typeId='+e.type2_id+"&lv=2"+'">'+e.type2_name+"</a>",n},u=function(e,t){var n="";n+="<dl"+(t==0?' class="fore"':"")+">",n+='<dt><a href="/view/cst/store.php?typeId='+e.type2_id+"&lv=2"+'">'+e.type2_name+"</a></dt><dd>";for(var r=0;r<e.type3List.length;r++)n+=a(e.type3List[r],r);return n+="</dd></dl>",n},a=function(e,t){var n="";return n+='<em><a href="/view/cst/store.php?typeId='+e.type3_id+"&lv=3"+'">'+e.type3_name+"</a></em>",n};e.ajax({type:"post",url:"/view/model/BMManage/GoodsTypeManageMethod.php",dataType:"json",data:{method:"List"},success:function(n){if(n.Success){var r=i(n.DataList),o="",u=0;t.each(r,function(e){o+=s(e,u),u++}),e("#category").append(o),e(".category .item").hoverForIE6({delay:0})}},error:function(e){alert("链接错误")}})}(this);var n=[0,0,0];e(document).ready(function(){u(980);var t=e("body").attr("id");t=="index"?e(".category").addClass("categoryHover"):e(".category").hoverForIE6({current:"categoryHover",delay:0});switch(t){case"index":break;case"store":n=[222,0,5],s(n),e(window).bind("resize",function(){s(n)});break;case"favorites":n=[222,215,4],s(n),e(window).bind("resize",function(){s(n)}),e(window).bind("scroll",i),e(window).bind("resize",i);break;case"cutoverWidth":o(),e(window).bind("resize",o);break;default:}u(),e(window).bind("resize",u),e(".tradeCart").hoverForIE6({current:"tradeCartHover",delay:200}),e(".contact").hoverForIE6({current:"contactHover",delay:0}),e(".toTop").click(function(){e(document).scrollTop(0)}),e(window).bind("scroll",function(){e(document).scrollTop()>200?e(".toTop").show(10):e(".toTop").hide()})})})